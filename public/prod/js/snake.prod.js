"use strict";var _createClass=function(){function o(i,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}}return function(i,t,e){return t&&o(i.prototype,t),e&&o(i,e),i}}();function _classCallCheck(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}!function s(r,a,c){function h(t,i){if(!a[t]){if(!r[t]){var e="function"==typeof require&&require;if(!i&&e)return e(t,!0);if(u)return u(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var n=a[t]={exports:{}};r[t][0].call(n.exports,function(i){return h(r[t][1][i]||i)},n,n.exports,s,r,a,c)}return a[t].exports}for(var u="function"==typeof require&&require,i=0;i<c.length;i++)h(c[i]);return h}({1:[function(i,t,e){Object.defineProperty(e,"__esModule",{value:!0});var o=i("./snake/food"),n=i("./snake/snake"),s=i("./snake/position"),r=i("./sound"),a=function(){function e(i){var t=this;_classCallCheck(this,e),this.score=0,this.hiscore=0,this.snake=i.snake,this.food=i.food,this.ctx=i.ctx,this.box=32,this.direction,this.directionTemp,this.background=new Image,this.background.src="/images/ground.png",this.sound={dead:new r.Sound("dead"),down:new r.Sound("down"),eat:new r.Sound("eat"),left:new r.Sound("left"),right:new r.Sound("right"),up:new r.Sound("up")},this.background.onload=function(){t.reset(),t.draw(),document.addEventListener("keydown",function(i){t.listenKeyboard(i)}),t.start()}}return _createClass(e,[{key:"reset",value:function(){this.score=0,this.snake.reset(),this.direction="right",this.directionTemp=this.direction,this.placePoint()}},{key:"listenKeyboard",value:function(i){var t=this.direction;37==i.keyCode&&"right"!=this.direction?t="left":38==i.keyCode&&"down"!=this.direction?t="up":39==i.keyCode&&"left"!=this.direction?t="right":40==i.keyCode&&"up"!=this.direction&&(t="down"),this.changeDirection(t)}},{key:"changeDirection",value:function(i){this.directionTemp=i}},{key:"drawScore",value:function(){this.ctx.fillStyle="white",this.ctx.font="45px Arial",this.ctx.fillText(""+this.score,2*this.box,1.6*this.box),this.ctx.font="24px Arial",this.ctx.fillText("High score: "+this.hiscore,14*this.box,1*this.box)}},{key:"drawGround",value:function(){this.ctx.drawImage(this.background,0,0)}},{key:"drawSnake",value:function(){for(var i=0;i<this.snake.position.length;i++){var t=this.snake.position[i].position;c.fillStyle=0==i?"green":"white",c.fillRect(t.x*this.box,t.y*this.box,this.box,this.box)}}},{key:"drawFood",value:function(){var i=this.food.drawImage;this.ctx.drawImage(i.image,i.x*this.box,i.y*this.box)}},{key:"moveSnake",value:function(){this.direction!==this.directionTemp&&this.sound[this.direction].play(),this.direction=this.directionTemp,this.snake.move(this.direction)}},{key:"draw",value:function(){this.drawGround(),this.drawScore(),this.drawFood(),this.drawSnake()}},{key:"placePoint",value:function(){var i=new s.Position,t=void 0;do{t=!1,i.random();for(var e=0;e<this.snake.position.length;e++)this.snake.position[e].x==i.x&&this.snake.position[e].y==i.y&&(t=!0)}while(t);this.food.reset(i)}},{key:"start",value:function(){var i=this;setInterval(function(){i.moveSnake(),i.snake.collision()&&(i.sound.dead.play(),alert("game over"),i.reset()),i.snake.position[0].x==i.food.position.x&&i.snake.position[0].y==i.food.position.y&&(i.sound.eat.play(),i.snake.add(),i.score++,i.placePoint(),i.score>i.hiscore&&(i.hiscore=i.score)),i.draw()},100)}}]),e}(),c=document.getElementById("canvas").getContext("2d");new a({snake:new n.Snake,food:new o.Food,ctx:c})},{"./snake/food":2,"./snake/position":3,"./snake/snake":4,"./sound":5}],2:[function(i,t,e){Object.defineProperty(e,"__esModule",{value:!0});var o=i("./position"),n=function(){function i(){_classCallCheck(this,i),this.position=new o.Position,this.image=new Image,this.image.src="./images/food.png"}return _createClass(i,[{key:"reset",value:function(i){this.position=i}},{key:"drawImage",get:function(){return{image:this.image,x:this.position.x,y:this.position.y}}}]),i}();e.Food=n},{"./position":3}],3:[function(i,t,e){Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function e(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,e),this.x=i,this.y=t}return _createClass(e,[{key:"random",value:function(){this.x=Math.floor(16*Math.random()+1),this.y=Math.floor(15*Math.random()+3)}},{key:"position",get:function(){return{x:this.x,y:this.y}}}]),e}();e.Position=o},{}],4:[function(i,t,e){Object.defineProperty(e,"__esModule",{value:!0});var o=i("./position"),n=function(){function i(){_classCallCheck(this,i),this.reset()}return _createClass(i,[{key:"collision",value:function(){for(var i=1;i<this.position.length;i++){var t=this.position[i];if(this.position[0].x==t.x&&this.position[0].y==t.y)return!0}return 17<this.position[0].y||this.position[0].y<3||this.position[0].x<1||17<this.position[0].x}},{key:"add",value:function(){this.position.push(this.position[this.position.length-1])}},{key:"move",value:function(i){var t=this.position[0],e=new o.Position(t.x,t.y);switch(this.position.pop(),i){case"left":e.x--;break;case"right":e.x++;break;case"up":e.y--;break;case"down":e.y++}this.position.unshift(e)}},{key:"reset",value:function(){this.position=[new o.Position(2,10),new o.Position(1,10)]}}]),i}();e.Snake=n},{"./position":3}],5:[function(i,t,e){Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(i){_classCallCheck(this,t),this.file=new Audio("/audio/"+i+".mp3")}return _createClass(t,[{key:"play",value:function(){this.file.play()}}]),t}();e.Sound=o},{}]},{},[1]);